# Evolutionary Salesman Module Documentation

This document explains how to properly use the `evo_salesman` Python module. This module wraps some functions from the `libevo` C library, making running an evolutionary simulation pretty straightforward.

This way we have the speed and low overhead from running the simulation in C and the flexibility and low complexity from dealing with the data in Python.

## Setup

The first step is to import the module.

```Python
import lib.evo_salesman as evo
```

Before running the simulation you need to set the paremeters that will be used. Not doing this will result in default parameters being used.

```Python
evo.set_parameters(num_cities, num_generations, num_individuals, mutation_prob, old_generation_ratio, map_size, rand_seed)
```
- `num_cities` - Number of cities
- `num_generations` - Number of generations the evolution will run for
- `num_individuals` - Number of individuals for each generation
- `mutation_prob` - Chance of mutation for each newly generated individual
- `old_generation_ratio` - The ratio of the best individuals that will stay for the next generation
- `map_size` - The vertical and horizontal size of the city map grid
- `rand_seed` - The seed that will be used for city generation and to run the evolution

After this you can generate the cities that will be used in the simulation. Running this again will result in new cities being generated, so running it only once allows for multiple simulations to be run in the same set of cities. Not generating cities before the running the simulation will result in cities being generated automatically.

```Python
evo.create_cities()
```

## Running the Simulation

Now is time to actually run the simulation. Run the following command and the simulation will be executed with the parameters and cities set in the previous steps.

```Python
evo.run_simulation()
```

## Getting the Data

When you run a simulation, data containing generations and cities are generated. This data is not directly returned when the simulation is executed, instead you have to call `get_generations()` and `get_cities()`. These functions will get the corresponding data generated by the `libevo` C library and return them as a Python data type.

```Python
cities = evo.get_cities()
generations = evo.get_generations()
```

`get_cities()` will return an array of cities. Each city has an `x` and `y` parameters that correspond to its coordinates.

`get_generations()` will return an array of generation. Each generation has a `individuals` paremeter that is an array of individuals.

Each individual has a `route` parameter that is an array of integers that represents the order they traveled the cities, where each integer is the index of a city in the array returned by `get_cities()`. Each individual als has a `total_distance` parameter that returns the total distance of their route.

## Clearing the Memory

By getting the data as explained in the previous section, you are copying the data allocated by the C library. After that, you can tell the C library to clear its data, freeing memory space.

```Python
evo.clear_data()
```

# Misc documentation

There is also a `misc` module that exports some useful functions that can be used to help in experimenting with the algorithm.

```Python
import lib.misc as msc
```

## Plotting cities

You can plot the cities returned by `get_cities()`.

```Python
msc.plot_cities(cities, map_size)
```
- `cities` - An array of cities (as returned by `get_cities()`)
- `map_size` - The size of the grid where the cities were generated

## Plotting evolution of the best distance

You can plot the best distance per generation to see how the evolution took place.

```Python
plot_best_distance_per_generation(generations)
```
- `generation` - An array of generations (as returned by `get_generations()`)

## Plotting a route

You can plot a route between the cities.

```Python
plot_route(cities,route)
```
- `cities` - An array of cities (as returned by `get_cities()`)
- `route` - An array of integer that represents the order that the individual traveled the cities
